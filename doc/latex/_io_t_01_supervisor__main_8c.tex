\doxysection{src/\+IoT Supervisor\+\_\+main.\+c File Reference}
\hypertarget{_io_t_01_supervisor__main_8c}{}\label{_io_t_01_supervisor__main_8c}\index{src/IoT Supervisor\_main.c@{src/IoT Supervisor\_main.c}}
{\ttfamily \#include $<$SI\+\_\+\+EFM8\+BB1\+\_\+\+Register\+\_\+\+Enums.\+h$>$}\newline
{\ttfamily \#include "{}Init\+Device.\+h"{}}\newline
{\ttfamily \#include "{}Io\+T\+\_\+\+Supervisor.\+h"{}}\newline
{\ttfamily \#include "{}Modbus\+Middle\+Ware.\+h"{}}\newline
{\ttfamily \#include "{}debugpins.\+h"{}}\newline
{\ttfamily \#include "{}Petit\+Modbus.\+h"{}}\newline
{\ttfamily \#include "{}EFM8\+BB1\+\_\+\+Flash\+Primitives.\+h"{}}\newline
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{group___reset___state___machine_gafc1dec4dc888692cdf30987658c2ab88}{SCOUNTER\+\_\+\+ONE\+\_\+\+SECOND}}~(125)
\item 
\#define \mbox{\hyperlink{group___modbus___w_d_t___state___machine_gab4cd620a6ff382f2308515027d02e9b2}{C\+\_\+\+DEFAULT\+\_\+\+MB\+\_\+\+WD\+\_\+\+TIMEOUT}}~(15)
\item 
\#define \mbox{\hyperlink{group___modbus___w_d_t___state___machine_gaf61d1b5aac0ac33eefb325181a6e81e8}{C\+\_\+\+MB\+\_\+\+WD\+\_\+\+COUNT2\+MIN}}~(7500)
\item 
\#define \mbox{\hyperlink{group___configuration___state___machine_gaa240e519cb5b99446d79d4aad8420dd1}{C\+\_\+\+FLASH\+\_\+\+CONF}}~(0x1\+E00)
\item 
\#define \mbox{\hyperlink{group___configuration___state___machine_gab1cca6a1cf1c6efba75c3ccab43e1518}{p\+FLASH\+\_\+\+CONF}}~((uint8\+\_\+t code\texorpdfstring{$\ast$}{*})\mbox{\hyperlink{group___configuration___state___machine_gaa240e519cb5b99446d79d4aad8420dd1}{C\+\_\+\+FLASH\+\_\+\+CONF}})/\texorpdfstring{$\ast$}{*} pointer to the flash \mbox{\hyperlink{group___configuration___state___machine_ga14ee0f41b2e64cad6f4c28cbb3fcb39b}{cfg}} \texorpdfstring{$\ast$}{*}/
\item 
\#define \mbox{\hyperlink{group___configuration___state___machine_ga0f6656888b6da3d751ce6bb0644d0dd9}{C\+\_\+\+PW\+\_\+\+DEFAULT}}~(0x\+DEFA)
\item 
\#define \mbox{\hyperlink{group___configuration___state___machine_ga2b8473431a4fe63b20294043b9ae4773}{C\+\_\+\+FOUND\+\_\+\+PROG\+\_\+\+END}}~(0x0\+F8D)
\item 
\#define \mbox{\hyperlink{group___configuration___state___machine_ga36de940e9065f10013db52ed98a34b1f}{C\+\_\+\+CFG\+\_\+\+HEADER\+\_\+\+LEN}}~(8)
\item 
\#define \mbox{\hyperlink{group___configuration___state___machine_ga65c7887c0e26969205a3e5b038fe403a}{C\+\_\+\+CFG\+\_\+\+DATA\+\_\+\+LEN}}~(5)
\item 
\#define \mbox{\hyperlink{group___configuration___state___machine_ga1cf8a7c45bd5eafaa45862c9f304da4c}{C\+\_\+\+CFG\+\_\+\+C\+\_\+\+CRC\+\_\+\+LEN}}~(2)
\item 
\#define \mbox{\hyperlink{group___configuration___state___machine_gaba2ebeddce6013b0ef742209113a58b7}{C\+\_\+\+CFG\+\_\+\+P\+\_\+\+CRC\+\_\+\+LEN}}~(2)
\item 
\#define \mbox{\hyperlink{group___configuration___state___machine_gad29b0843a725184d4dcde51268edc086}{C\+\_\+\+CFG\+\_\+\+DATA\+\_\+\+END}}~(\mbox{\hyperlink{group___configuration___state___machine_ga36de940e9065f10013db52ed98a34b1f}{C\+\_\+\+CFG\+\_\+\+HEADER\+\_\+\+LEN}} + \mbox{\hyperlink{group___configuration___state___machine_ga65c7887c0e26969205a3e5b038fe403a}{C\+\_\+\+CFG\+\_\+\+DATA\+\_\+\+LEN}})
\item 
\#define \mbox{\hyperlink{group___configuration___state___machine_ga19952ec2f55ea62e4cdaf7637fb29e4e}{C\+\_\+\+CFG\+\_\+\+C\+\_\+\+CRC\+\_\+\+END}}~(\mbox{\hyperlink{group___configuration___state___machine_gad29b0843a725184d4dcde51268edc086}{C\+\_\+\+CFG\+\_\+\+DATA\+\_\+\+END}} + \mbox{\hyperlink{group___configuration___state___machine_ga1cf8a7c45bd5eafaa45862c9f304da4c}{C\+\_\+\+CFG\+\_\+\+C\+\_\+\+CRC\+\_\+\+LEN}})
\item 
\#define \mbox{\hyperlink{group___configuration___state___machine_ga0ae2d8806fe25d3e6b27511f76385ae6}{C\+\_\+\+CFG\+\_\+\+P\+\_\+\+CRC\+\_\+\+END}}~(\mbox{\hyperlink{group___configuration___state___machine_ga19952ec2f55ea62e4cdaf7637fb29e4e}{C\+\_\+\+CFG\+\_\+\+C\+\_\+\+CRC\+\_\+\+END}} + \mbox{\hyperlink{group___configuration___state___machine_gaba2ebeddce6013b0ef742209113a58b7}{C\+\_\+\+CFG\+\_\+\+P\+\_\+\+CRC\+\_\+\+LEN}})
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{group___main___application_ga09296ef32928eaaa20010361d50ddf08}{Si\+Labs\+\_\+\+Startup}} (void)
\begin{DoxyCompactList}\small\item\em \doxylink{group___main___application_ga09296ef32928eaaa20010361d50ddf08}{Si\+Labs\+\_\+\+Startup()} Routine. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___reset___state___machine_gae07580e6a3e7427894a9809c979f3f65}{Vin\+Sm}} (void)
\item 
void \mbox{\hyperlink{group___modbus___w_d_t___state___machine_ga18a609d79f133d41b52d1cc90469be47}{mb\+WDTsm}} (void)
\item 
bool \mbox{\hyperlink{group___configuration___state___machine_gadb26e03a4457120c3b24c6316b9dcabe}{ccfg\+\_\+check}} (void)
\item 
bool \mbox{\hyperlink{group___configuration___state___machine_ga788ff1c4a563985fc673182073aed78c}{dcfg\+\_\+check}} ()
\item 
void \mbox{\hyperlink{group___configuration___state___machine_gaa517964897d449243fda50976465744a}{cfg\+\_\+load}} ()
\item 
void \mbox{\hyperlink{group___configuration___state___machine_gaebd0a8f26aa5dfb3610e419c7c5070b7}{cfg\+\_\+write}} (void)
\item 
void \mbox{\hyperlink{group___configuration___state___machine_gaaa703efb79709d2f2e12561f47f253b7}{CFGsm}} ()
\item 
int \mbox{\hyperlink{group___main___application_ga840291bc02cba5474a4cb46a9b9566fe}{main}} (void)
\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
volatile \mbox{\hyperlink{unionsv__dev__sta__t}{sv\+\_\+dev\+\_\+sta\+\_\+t}} \mbox{\hyperlink{group___main___application_ga5aeeb2c06cb9bc8498f6ca5a520157d5}{sv\+\_\+dev\+\_\+sta}} = \{0\}
\item 
volatile uint8\+\_\+t \mbox{\hyperlink{group___main___application_gabff40580a49bdbf86db348e6ab0a8dc1}{t1\+Count}} = 0
\item 
volatile uint8\+\_\+t \mbox{\hyperlink{group___main___application_ga9f016462fc2803075b67d903c4045aa7}{t0\+Count}} = 0
\item 
uint8\+\_\+t \mbox{\hyperlink{group___main___application_ga06f41e11cde40f73d65c73f928a89ae9}{T0\+C\+\_\+\+TOP}} = 0
\item 
bool \mbox{\hyperlink{group___reset___state___machine_ga31390fb09ef36dd888ed0850ab41521d}{n\+Reset}} = false
\item 
bool \mbox{\hyperlink{group___reset___state___machine_ga0483e3e419cbb0dcb1a54e2d9d7b78e6}{modbus\+Wdt\+Sm\+En}} = false
\item 
bool \mbox{\hyperlink{group___reset___state___machine_ga59f537ef8b7df61f7a1a3b477f5fc340}{cprif}} = false
\item 
bool \mbox{\hyperlink{group___reset___state___machine_gad7452351720eb5866550eadd22acf654}{modbus\+Wdt\+Exp}} = false
\item 
uint8\+\_\+t \mbox{\hyperlink{group___modbus___w_d_t___state___machine_gab9eb643439bfb234f1a6da202f1cbf60}{MB\+\_\+\+WD\+\_\+\+TIMEOUT}} = \mbox{\hyperlink{group___modbus___w_d_t___state___machine_gab4cd620a6ff382f2308515027d02e9b2}{C\+\_\+\+DEFAULT\+\_\+\+MB\+\_\+\+WD\+\_\+\+TIMEOUT}}
\item 
bool \mbox{\hyperlink{group___modbus___w_d_t___state___machine_gabc0aa6fcb559a316edc1f101fea54a5e}{mb\+WDTen}} = false
\item 
bool \mbox{\hyperlink{group___modbus___w_d_t___state___machine_ga25dc89f8181779a398b5b593342f6783}{mb\+WDTpet}} = false
\item 
code const uint8\+\_\+t \mbox{\hyperlink{group___configuration___state___machine_ga4786f95f528dfb7d6225d35b27072418}{ex\+\_\+cfg\+\_\+header}} \mbox{[}$\,$\mbox{]}
\item 
code const \mbox{\hyperlink{structcfg__t}{cfg\+\_\+t}} \mbox{\hyperlink{group___configuration___state___machine_ga35236392c891bc6d5ccee8f619d2f92a}{default\+\_\+cfg}}
\item 
\mbox{\hyperlink{_io_t___supervisor_8h_a2e2885d00577c7076677cc277ac4f238}{Cfg\+SM\+\_\+t}} \mbox{\hyperlink{group___configuration___state___machine_ga6c9c723896f1d714b5d1caeb1afceda6}{cfg\+SmS}} = \mbox{\hyperlink{_io_t___supervisor_8h_a2e2885d00577c7076677cc277ac4f238a77c6aa8579abb456a1022f2c0749809b}{e\+CFG\+\_\+\+Load}}
\item 
bool \mbox{\hyperlink{group___configuration___state___machine_ga0959e8576e2d8601bc958bbf7680f0d4}{pw\+\_\+flag}} = false
\item 
bool \mbox{\hyperlink{group___configuration___state___machine_ga4310b6cbe0d1f02c0d8bacadf8fa09a2}{dir\+\_\+tx}} = false
\item 
bool \mbox{\hyperlink{group___configuration___state___machine_ga7624452708e1f4a54f678332e81c4867}{run\+\_\+petitmodbus}} = false
\item 
uint16\+\_\+t \mbox{\hyperlink{group___configuration___state___machine_ga1edfc8756590da90a14f41af9bd71dc4}{pw}}
\item 
\mbox{\hyperlink{structcfg__t}{cfg\+\_\+t}} \mbox{\hyperlink{group___configuration___state___machine_ga14ee0f41b2e64cad6f4c28cbb3fcb39b}{cfg}}
\item 
uint8\+\_\+t \mbox{\hyperlink{group___configuration___state___machine_gaa8b9a108114d596023dc16a2f4629665}{cfg\+\_\+write\+\_\+idx}} = 0
\item 
uint16\+\_\+t \mbox{\hyperlink{group___configuration___state___machine_ga2e76b6ae721cc46405d326ebb01396ee}{calc\+\_\+cfg\+\_\+crc}} = 0x\+FFFF
\item 
uint16\+\_\+t \mbox{\hyperlink{group___configuration___state___machine_ga2af04e4d032e98d5461d108969d9c8bd}{calc\+\_\+prog\+\_\+crc}} = 0x\+FFFF
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
generated by Hardware Configurator

This file will be updated when saving a document. leave the sections inside the "{}\$\mbox{[}...\mbox{]}"{} comment tags alone or they will be overwritten!!

This is the internet of trash supervisor implementation it has two components\+: voltage monitoring (because the opi doesn\textquotesingle{}t have it) and a watchdog (because stuff crashes all the time and nobody notices) 

Definition in file \mbox{\hyperlink{_io_t_01_supervisor__main_8c_source}{Io\+T Supervisor\+\_\+main.\+c}}.

