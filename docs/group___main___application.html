<!-- HTML header for doxygen 1.9.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>IoT Supervisor: Main Application</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script type="text/javascript">
window.MathJax = {
  options: {
    ignoreHtmlClass: 'tex2jax_ignore',
    processHtmlClass: 'tex2jax_process'
  }
};
</script>
<script type="text/javascript" id="MathJax-script" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">IoT Supervisor<span id="projectnumber">&#160;0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group___main___application.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">Main Application</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="groups" name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group___blinker" id="r_group___blinker"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___blinker.html">Heart Beat Blinker</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group___voltage___state___machine" id="r_group___voltage___state___machine"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___voltage___state___machine.html">Voltage In and Reset State Machine</a></td></tr>
<tr class="memdesc:group___voltage___state___machine"><td class="mdescLeft">&#160;</td><td class="mdescRight">vin and reset the state machine <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group___modbus___w_d_t___state___machine" id="r_group___modbus___w_d_t___state___machine"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___modbus___w_d_t___state___machine.html">Modbus WDT State Machine</a></td></tr>
<tr class="memdesc:group___modbus___w_d_t___state___machine"><td class="mdescLeft">&#160;</td><td class="mdescRight">The modbus watchdog timer state machine. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group___configuration___state___machine" id="r_group___configuration___state___machine"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___configuration___state___machine.html">Configuration State Machine</a></td></tr>
<tr class="memdesc:group___configuration___state___machine"><td class="mdescLeft">&#160;</td><td class="mdescRight">The configuration state machine starts and maintains the system configuration. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">union &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="unionsv__dev__sta__t.html">sv_dev_sta_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga6fd609b4d1cbec982d502d97a866fca7" id="r_ga6fd609b4d1cbec982d502d97a866fca7"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___main___application.html#ga6fd609b4d1cbec982d502d97a866fca7">LastRst_t</a> { <a class="el" href="group___main___application.html#gga6fd609b4d1cbec982d502d97a866fca7aabbf9c5d549fef8704eef1b591ff3c6f">eLR_Init</a> = 0
, <a class="el" href="group___main___application.html#gga6fd609b4d1cbec982d502d97a866fca7aef014178696aec6a4defef724db4158c">eLR_VSM</a>
, <a class="el" href="group___main___application.html#gga6fd609b4d1cbec982d502d97a866fca7ab8363aea3ebaa44acfd823adf3aa6a82">eLR_WDT</a>
 }</td></tr>
<tr class="separator:ga6fd609b4d1cbec982d502d97a866fca7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga09296ef32928eaaa20010361d50ddf08" id="r_ga09296ef32928eaaa20010361d50ddf08"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___main___application.html#ga09296ef32928eaaa20010361d50ddf08">SiLabs_Startup</a> (void)</td></tr>
<tr class="memdesc:ga09296ef32928eaaa20010361d50ddf08"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="group___main___application.html#ga09296ef32928eaaa20010361d50ddf08" title="SiLabs_Startup() Routine.">SiLabs_Startup()</a> Routine.  <br /></td></tr>
<tr class="separator:ga09296ef32928eaaa20010361d50ddf08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga840291bc02cba5474a4cb46a9b9566fe" id="r_ga840291bc02cba5474a4cb46a9b9566fe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___main___application.html#ga840291bc02cba5474a4cb46a9b9566fe">main</a> (void)</td></tr>
<tr class="separator:ga840291bc02cba5474a4cb46a9b9566fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga5aeeb2c06cb9bc8498f6ca5a520157d5" id="r_ga5aeeb2c06cb9bc8498f6ca5a520157d5"><td class="memItemLeft" align="right" valign="top">volatile <a class="el" href="unionsv__dev__sta__t.html">sv_dev_sta_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___main___application.html#ga5aeeb2c06cb9bc8498f6ca5a520157d5">sv_dev_sta</a> = {0}</td></tr>
<tr class="separator:ga5aeeb2c06cb9bc8498f6ca5a520157d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga41510eddee8f6b5ed47ac84a1802ed05" id="r_ga41510eddee8f6b5ed47ac84a1802ed05"><td class="memItemLeft" align="right" valign="top">volatile <a class="el" href="_io_t___supervisor_8h.html#acc52489b520d2a9d93572b350a5bc346">t1Count_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___main___application.html#ga41510eddee8f6b5ed47ac84a1802ed05">t1Count</a> = 0</td></tr>
<tr class="separator:ga41510eddee8f6b5ed47ac84a1802ed05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9f016462fc2803075b67d903c4045aa7" id="r_ga9f016462fc2803075b67d903c4045aa7"><td class="memItemLeft" align="right" valign="top">volatile uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___main___application.html#ga9f016462fc2803075b67d903c4045aa7">t0Count</a> = 0</td></tr>
<tr class="separator:ga9f016462fc2803075b67d903c4045aa7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga06f41e11cde40f73d65c73f928a89ae9" id="r_ga06f41e11cde40f73d65c73f928a89ae9"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___main___application.html#ga06f41e11cde40f73d65c73f928a89ae9">T0C_TOP</a> = 0</td></tr>
<tr class="separator:ga06f41e11cde40f73d65c73f928a89ae9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="ga6fd609b4d1cbec982d502d97a866fca7" name="ga6fd609b4d1cbec982d502d97a866fca7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6fd609b4d1cbec982d502d97a866fca7">&#9670;&#160;</a></span>LastRst_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group___main___application.html#ga6fd609b4d1cbec982d502d97a866fca7">LastRst_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Last Reset Source _ Type</p>
<p><b>Last</b> <b>R</b>e<b>s</b>e<b>t</b> Source <b>_ T</b>ype </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga6fd609b4d1cbec982d502d97a866fca7aabbf9c5d549fef8704eef1b591ff3c6f" name="gga6fd609b4d1cbec982d502d97a866fca7aabbf9c5d549fef8704eef1b591ff3c6f"></a>eLR_Init&#160;</td><td class="fielddoc"><p>Initial State. No recorded reset. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga6fd609b4d1cbec982d502d97a866fca7aef014178696aec6a4defef724db4158c" name="gga6fd609b4d1cbec982d502d97a866fca7aef014178696aec6a4defef724db4158c"></a>eLR_VSM&#160;</td><td class="fielddoc"><p>A low voltage condition caused the last reset. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga6fd609b4d1cbec982d502d97a866fca7ab8363aea3ebaa44acfd823adf3aa6a82" name="gga6fd609b4d1cbec982d502d97a866fca7ab8363aea3ebaa44acfd823adf3aa6a82"></a>eLR_WDT&#160;</td><td class="fielddoc"><p>The modbus watchdog timer caused the last reset. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="_io_t___supervisor_8h_source.html#l00087">87</a> of file <a class="el" href="_io_t___supervisor_8h_source.html">IoT_Supervisor.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga840291bc02cba5474a4cb46a9b9566fe" name="ga840291bc02cba5474a4cb46a9b9566fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga840291bc02cba5474a4cb46a9b9566fe">&#9670;&#160;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This is the main function where the configuration and modbus are run.</p>
<p>It is assumed that the main function is run after the cinit and startup implementations, so all global and static variables are initialized to their correct default values.</p>
<p>The main function takes into consideration the reset condition to determine whether the vin state machine should start into the "ok" state or the "Init" state.</p>
<p>The main function implements a counter-based system using the <a class="el" href="group___main___application.html#ga41510eddee8f6b5ed47ac84a1802ed05">t1Count</a> global which is incremented once a millisecond. An internal counter is incremented each time the modbus loop is executed. This makes it acceptable for the modbus process to overrun its timeslot through multiple cycles without affecting the number of times it is executed for timing purposes. Note that there is an anti-windup feature activated when <a class="el" href="group___configuration___state___machine.html#ga7624452708e1f4a54f678332e81c4867">run_petitmodbus</a> is not set where the internal counter is immediately set to the value of <a class="el" href="group___main___application.html#ga41510eddee8f6b5ed47ac84a1802ed05">t1Count</a> rather than incremented upon each execution. </p><dl class="section return"><dt>Returns</dt><dd>main functions usually have a return that should never get reached. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_io_t_01_supervisor__main_8c_source.html#l00835">835</a> of file <a class="el" href="_io_t_01_supervisor__main_8c_source.html">IoT Supervisor_main.c</a>.</p>

</div>
</div>
<a id="ga09296ef32928eaaa20010361d50ddf08" name="ga09296ef32928eaaa20010361d50ddf08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga09296ef32928eaaa20010361d50ddf08">&#9670;&#160;</a></span>SiLabs_Startup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SiLabs_Startup </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="group___main___application.html#ga09296ef32928eaaa20010361d50ddf08" title="SiLabs_Startup() Routine.">SiLabs_Startup()</a> Routine. </p>
<p>This function is called immediately after reset, before the initialization code is run in SILABS_STARTUP.A51 (which runs before <a class="el" href="group___main___application.html#ga840291bc02cba5474a4cb46a9b9566fe">main()</a> ). This is a useful place to disable the watchdog timer, which is enabled by default and may trigger before <a class="el" href="group___main___application.html#ga840291bc02cba5474a4cb46a9b9566fe">main()</a> in some instances. </p>

<p class="definition">Definition at line <a class="el" href="_io_t_01_supervisor__main_8c_source.html#l00038">38</a> of file <a class="el" href="_io_t_01_supervisor__main_8c_source.html">IoT Supervisor_main.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ga5aeeb2c06cb9bc8498f6ca5a520157d5" name="ga5aeeb2c06cb9bc8498f6ca5a520157d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5aeeb2c06cb9bc8498f6ca5a520157d5">&#9670;&#160;</a></span>sv_dev_sta</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile <a class="el" href="unionsv__dev__sta__t.html">sv_dev_sta_t</a> sv_dev_sta = {0}</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_io_t_01_supervisor__main_8c_source.html#l00047">47</a> of file <a class="el" href="_io_t_01_supervisor__main_8c_source.html">IoT Supervisor_main.c</a>.</p>

</div>
</div>
<a id="ga06f41e11cde40f73d65c73f928a89ae9" name="ga06f41e11cde40f73d65c73f928a89ae9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga06f41e11cde40f73d65c73f928a89ae9">&#9670;&#160;</a></span>T0C_TOP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t T0C_TOP = 0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Software counter to implement modbus inter-byte timeout </p>

<p class="definition">Definition at line <a class="el" href="_io_t_01_supervisor__main_8c_source.html#l00055">55</a> of file <a class="el" href="_io_t_01_supervisor__main_8c_source.html">IoT Supervisor_main.c</a>.</p>

</div>
</div>
<a id="ga9f016462fc2803075b67d903c4045aa7" name="ga9f016462fc2803075b67d903c4045aa7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9f016462fc2803075b67d903c4045aa7">&#9670;&#160;</a></span>t0Count</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint8_t t0Count = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_io_t_01_supervisor__main_8c_source.html#l00053">53</a> of file <a class="el" href="_io_t_01_supervisor__main_8c_source.html">IoT Supervisor_main.c</a>.</p>

</div>
</div>
<a id="ga41510eddee8f6b5ed47ac84a1802ed05" name="ga41510eddee8f6b5ed47ac84a1802ed05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga41510eddee8f6b5ed47ac84a1802ed05">&#9670;&#160;</a></span>t1Count</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile <a class="el" href="_io_t___supervisor_8h.html#acc52489b520d2a9d93572b350a5bc346">t1Count_t</a> t1Count = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_io_t_01_supervisor__main_8c_source.html#l00050">50</a> of file <a class="el" href="_io_t_01_supervisor__main_8c_source.html">IoT Supervisor_main.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.8-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
<script>
  const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches;
  mermaid.initialize({
    startOnLoad: true,
    theme: isDarkMode ? 'dark' : 'default', 
  });
</script>
</body>
</html>
