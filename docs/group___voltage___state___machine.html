<!-- HTML header for doxygen 1.9.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>IoT Supervisor: Voltage In and Reset State Machine</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script type="text/javascript">
window.MathJax = {
  options: {
    ignoreHtmlClass: 'tex2jax_ignore',
    processHtmlClass: 'tex2jax_process'
  }
};
</script>
<script type="text/javascript" id="MathJax-script" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">IoT Supervisor<span id="projectnumber">&#160;0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group___voltage___state___machine.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">Voltage In and Reset State Machine<div class="ingroups"><a class="el" href="group___main___application.html">Main Application</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>vin and reset the state machine  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gafc1dec4dc888692cdf30987658c2ab88" id="r_gafc1dec4dc888692cdf30987658c2ab88"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___voltage___state___machine.html#gafc1dec4dc888692cdf30987658c2ab88">SCOUNTER_ONE_SECOND</a>&#160;&#160;&#160;(125)</td></tr>
<tr class="separator:gafc1dec4dc888692cdf30987658c2ab88"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:gac71595e22bb54f0f156340ffb1ff44ba" id="r_gac71595e22bb54f0f156340ffb1ff44ba"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___voltage___state___machine.html#gac71595e22bb54f0f156340ffb1ff44ba">VinSm_t</a> { <a class="el" href="group___voltage___state___machine.html#ggac71595e22bb54f0f156340ffb1ff44baa3cc30a2b8b36959007d7b06a0026b4f4">eVIN_Init</a> = 0
, <a class="el" href="group___voltage___state___machine.html#ggac71595e22bb54f0f156340ffb1ff44baa4e6b99c0462309e3c86bb63696783469">eVIN_VLow</a>
, <a class="el" href="group___voltage___state___machine.html#ggac71595e22bb54f0f156340ffb1ff44baa77379fa13bb54be31a0d2839ab3fcfa9">eVIN_OK</a>
 }</td></tr>
<tr class="separator:gac71595e22bb54f0f156340ffb1ff44ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gae07580e6a3e7427894a9809c979f3f65" id="r_gae07580e6a3e7427894a9809c979f3f65"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___voltage___state___machine.html#gae07580e6a3e7427894a9809c979f3f65">VinSm</a> (void)</td></tr>
<tr class="separator:gae07580e6a3e7427894a9809c979f3f65"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga31390fb09ef36dd888ed0850ab41521d" id="r_ga31390fb09ef36dd888ed0850ab41521d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___voltage___state___machine.html#ga31390fb09ef36dd888ed0850ab41521d">nReset</a> = false</td></tr>
<tr class="separator:ga31390fb09ef36dd888ed0850ab41521d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0483e3e419cbb0dcb1a54e2d9d7b78e6" id="r_ga0483e3e419cbb0dcb1a54e2d9d7b78e6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___voltage___state___machine.html#ga0483e3e419cbb0dcb1a54e2d9d7b78e6">modbusWdtSmEn</a> = false</td></tr>
<tr class="separator:ga0483e3e419cbb0dcb1a54e2d9d7b78e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga59f537ef8b7df61f7a1a3b477f5fc340" id="r_ga59f537ef8b7df61f7a1a3b477f5fc340"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___voltage___state___machine.html#ga59f537ef8b7df61f7a1a3b477f5fc340">cprif</a> = false</td></tr>
<tr class="separator:ga59f537ef8b7df61f7a1a3b477f5fc340"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad7452351720eb5866550eadd22acf654" id="r_gad7452351720eb5866550eadd22acf654"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___voltage___state___machine.html#gad7452351720eb5866550eadd22acf654">modbusWdtExp</a> = false</td></tr>
<tr class="separator:gad7452351720eb5866550eadd22acf654"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>vin and reset the state machine </p>
<p> <div class="mermaid"> 
   stateDiagram-v2
 direction LR
 [*] --> Init
 Init --> OK: Two Seconds
 Init --> VLow: Voltage In Low
 OK --> VLow: Voltage In Low
 OK --> VLow: Modbus Timeout
 VLow --> Init: Voltage In Normal
  
  </div>   <div class="mermaid"> 
   flowchart LR
 start(( ))
 subgraph Interrupts.c
 subgraph TIMER1_ISR["TIMER1_ISR()"]
 div8["Divide By 8 Calls"]
 end
 end
 subgraph IoT supervisor_main.c
 VinSm["VinSm( )"]
 end
 start -->|every 1 ms| div8
 div8 -->|every 8 ms| VinSm
  
  </div>  The reset and voltage in state machine responds to reset sources and pulls the reset line down for two seconds upon the reset source triggering. The detailed implementation is different for each reset source. The voltage in reset source pulls down for as long as it is running. It only reaches the two second countdown once the vin state is cleared. The WDT reset source fires once and automatically reaches the two second countdown. </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="gafc1dec4dc888692cdf30987658c2ab88" name="gafc1dec4dc888692cdf30987658c2ab88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafc1dec4dc888692cdf30987658c2ab88">&#9670;&#160;</a></span>SCOUNTER_ONE_SECOND</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SCOUNTER_ONE_SECOND&#160;&#160;&#160;(125)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_io_t_01_supervisor__main_8c_source.html#l00083">83</a> of file <a class="el" href="_io_t_01_supervisor__main_8c_source.html">IoT Supervisor_main.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="gac71595e22bb54f0f156340ffb1ff44ba" name="gac71595e22bb54f0f156340ffb1ff44ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac71595e22bb54f0f156340ffb1ff44ba">&#9670;&#160;</a></span>VinSm_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group___voltage___state___machine.html#gac71595e22bb54f0f156340ffb1ff44ba">VinSm_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Voltage in (and Reset) State Machine _ Type</p>
<p><b>V</b>oltage <b>in</b> (and Reset) <b>S</b>tate <b>M</b>achine <b>_ T</b>ype </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ggac71595e22bb54f0f156340ffb1ff44baa3cc30a2b8b36959007d7b06a0026b4f4" name="ggac71595e22bb54f0f156340ffb1ff44baa3cc30a2b8b36959007d7b06a0026b4f4"></a>eVIN_Init&#160;</td><td class="fielddoc"><p>Voltage in and Reset State Machine Initial State</p>
<p>The state machine sets reset to true in this state, and the state machine transitions into this state when the Modbus WDT bites. eVIN_Init </p>
</td></tr>
<tr><td class="fieldname"><a id="ggac71595e22bb54f0f156340ffb1ff44baa4e6b99c0462309e3c86bb63696783469" name="ggac71595e22bb54f0f156340ffb1ff44baa4e6b99c0462309e3c86bb63696783469"></a>eVIN_VLow&#160;</td><td class="fielddoc"><p>Voltage Low State. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggac71595e22bb54f0f156340ffb1ff44baa77379fa13bb54be31a0d2839ab3fcfa9" name="ggac71595e22bb54f0f156340ffb1ff44baa77379fa13bb54be31a0d2839ab3fcfa9"></a>eVIN_OK&#160;</td><td class="fielddoc"><p>Voltage in and Reset State Machine OK. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="_io_t___supervisor_8h_source.html#l00051">51</a> of file <a class="el" href="_io_t___supervisor_8h_source.html">IoT_Supervisor.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gae07580e6a3e7427894a9809c979f3f65" name="gae07580e6a3e7427894a9809c979f3f65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae07580e6a3e7427894a9809c979f3f65">&#9670;&#160;</a></span>VinSm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VinSm </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Voltage in state machine. Perhaps this could be called the main state machine in this application.</p>
<p>The state machine starts in the reset mode to enable a boot-up delay on the SBC so that screens and stuff can initialize before the board does. </p>

<p class="definition">Definition at line <a class="el" href="_io_t_01_supervisor__main_8c_source.html#l00093">93</a> of file <a class="el" href="_io_t_01_supervisor__main_8c_source.html">IoT Supervisor_main.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ga59f537ef8b7df61f7a1a3b477f5fc340" name="ga59f537ef8b7df61f7a1a3b477f5fc340"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga59f537ef8b7df61f7a1a3b477f5fc340">&#9670;&#160;</a></span>cprif</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool cprif = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_io_t_01_supervisor__main_8c_source.html#l00078">78</a> of file <a class="el" href="_io_t_01_supervisor__main_8c_source.html">IoT Supervisor_main.c</a>.</p>

</div>
</div>
<a id="gad7452351720eb5866550eadd22acf654" name="gad7452351720eb5866550eadd22acf654"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad7452351720eb5866550eadd22acf654">&#9670;&#160;</a></span>modbusWdtExp</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool modbusWdtExp = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_io_t_01_supervisor__main_8c_source.html#l00080">80</a> of file <a class="el" href="_io_t_01_supervisor__main_8c_source.html">IoT Supervisor_main.c</a>.</p>

</div>
</div>
<a id="ga0483e3e419cbb0dcb1a54e2d9d7b78e6" name="ga0483e3e419cbb0dcb1a54e2d9d7b78e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0483e3e419cbb0dcb1a54e2d9d7b78e6">&#9670;&#160;</a></span>modbusWdtSmEn</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool modbusWdtSmEn = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_io_t_01_supervisor__main_8c_source.html#l00075">75</a> of file <a class="el" href="_io_t_01_supervisor__main_8c_source.html">IoT Supervisor_main.c</a>.</p>

</div>
</div>
<a id="ga31390fb09ef36dd888ed0850ab41521d" name="ga31390fb09ef36dd888ed0850ab41521d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga31390fb09ef36dd888ed0850ab41521d">&#9670;&#160;</a></span>nReset</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool nReset = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_io_t_01_supervisor__main_8c_source.html#l00074">74</a> of file <a class="el" href="_io_t_01_supervisor__main_8c_source.html">IoT Supervisor_main.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.8-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
<script>
  const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches;
  mermaid.initialize({
    startOnLoad: true,
    theme: isDarkMode ? 'dark' : 'default', 
  });
</script>
</body>
</html>
