<!-- HTML header for doxygen 1.9.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>IoT Supervisor: Heart Beat Blinker</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script type="text/javascript">
window.MathJax = {
  options: {
    ignoreHtmlClass: 'tex2jax_ignore',
    processHtmlClass: 'tex2jax_process'
  }
};
</script>
<script type="text/javascript" id="MathJax-script" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">IoT Supervisor<span id="projectnumber">&#160;0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group___blinker.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">Heart Beat Blinker<div class="ingroups"><a class="el" href="group___main___application.html">Main Application</a></div></div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gac1580c8fe58aec053a031b2fb84e5016" id="r_gac1580c8fe58aec053a031b2fb84e5016"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___blinker.html#gac1580c8fe58aec053a031b2fb84e5016">HB_DIV</a>&#160;&#160;&#160;(9u)</td></tr>
<tr class="separator:gac1580c8fe58aec053a031b2fb84e5016"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga28232e33acc0bede8ef1d909136a3f36" id="r_ga28232e33acc0bede8ef1d909136a3f36"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___blinker.html#ga28232e33acc0bede8ef1d909136a3f36">HB_DUTYCYCLE</a>&#160;&#160;&#160;(4u)</td></tr>
<tr class="separator:ga28232e33acc0bede8ef1d909136a3f36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga676c6d2aaaa9903a62ae18e182923d16" id="r_ga676c6d2aaaa9903a62ae18e182923d16"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___blinker.html#ga676c6d2aaaa9903a62ae18e182923d16">HB_SKIP</a>&#160;&#160;&#160;(4u)</td></tr>
<tr class="separator:ga676c6d2aaaa9903a62ae18e182923d16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gade65acac06eb242d02d71648b41b27f6" id="r_gade65acac06eb242d02d71648b41b27f6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___blinker.html#gade65acac06eb242d02d71648b41b27f6">FAST_BLINK</a>&#160;&#160;&#160;(9u)</td></tr>
<tr class="separator:gade65acac06eb242d02d71648b41b27f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad2f2358ce2a0e5765d5eb1087633a7e6" id="r_gad2f2358ce2a0e5765d5eb1087633a7e6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___blinker.html#gad2f2358ce2a0e5765d5eb1087633a7e6">SLOW_BLINK</a>&#160;&#160;&#160;(<a class="el" href="group___blinker.html#gade65acac06eb242d02d71648b41b27f6">FAST_BLINK</a> + 2u)</td></tr>
<tr class="separator:gad2f2358ce2a0e5765d5eb1087633a7e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gac3904e59393211c5ea87813812356e05" id="r_gac3904e59393211c5ea87813812356e05"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___blinker.html#gac3904e59393211c5ea87813812356e05">blinker</a> (void)</td></tr>
<tr class="separator:gac3904e59393211c5ea87813812356e05"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:gab724f7c43d0d1bbb8401d0ef0abf8ac4" id="r_gab724f7c43d0d1bbb8401d0ef0abf8ac4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___blinker.html#gab724f7c43d0d1bbb8401d0ef0abf8ac4">sys_ok</a> = true</td></tr>
<tr class="separator:gab724f7c43d0d1bbb8401d0ef0abf8ac4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9b72b6aa164172cd3d0b8dfe56833c11" id="r_ga9b72b6aa164172cd3d0b8dfe56833c11"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___blinker.html#ga9b72b6aa164172cd3d0b8dfe56833c11">configuring</a> = false</td></tr>
<tr class="separator:ga9b72b6aa164172cd3d0b8dfe56833c11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf318e0fdf052bf1c57db435343dbbecc" id="r_gaf318e0fdf052bf1c57db435343dbbecc"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___blinker.html#gaf318e0fdf052bf1c57db435343dbbecc">hbdCount</a> = 0</td></tr>
<tr class="separator:gaf318e0fdf052bf1c57db435343dbbecc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaae68010a7dda3c61c7edd0eb74195a5d" id="r_gaae68010a7dda3c61c7edd0eb74195a5d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___blinker.html#gaae68010a7dda3c61c7edd0eb74195a5d">hbd_state</a> = false</td></tr>
<tr class="separator:gaae68010a7dda3c61c7edd0eb74195a5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafe53a3c1193d19d6a47b1b45c5001ba1" id="r_gafe53a3c1193d19d6a47b1b45c5001ba1"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___blinker.html#gafe53a3c1193d19d6a47b1b45c5001ba1">hbsCount</a> = 0</td></tr>
<tr class="separator:gafe53a3c1193d19d6a47b1b45c5001ba1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This section contains the heart beat blinker.</p>
<p>The main driver of the heart beat LED display is a counter and some combinational logic performed on select bits on the counter. The counter selected is the previously implemented <a class="el" href="group___main___application.html#ga41510eddee8f6b5ed47ac84a1802ed05">t1Count</a> which increments every 1ms or so. A slow bit of the counter a bit two times faster are selected. These two bits are then "and"ed together to form the main heartbeat.</p>
<p>This program implements two complications on the original heart beat functionality. One is a heart beat skip implemented as the counter <a class="el" href="group___blinker.html#gafe53a3c1193d19d6a47b1b45c5001ba1">hbsCount</a>. This counter is triggered on ::hbs_re or "heart beat skip, rising edge" which is triggered on some combinational logic on the same <a class="el" href="group___main___application.html#ga41510eddee8f6b5ed47ac84a1802ed05">t1Count</a> as the main heartbeat. Specifically, it is triggered when the slow counter bit is high and the subsequent lesser-significant bits are zero. In bit-vector terms, this would look something like 0bzzzz zz10 0000 0000 where 'z' is a "don't care" bit. The heart beat skip counter is set to 0 the cycle after it reaches its compare match value <a class="el" href="group___blinker.html#ga676c6d2aaaa9903a62ae18e182923d16">HB_SKIP</a>. The original heart beat ::hb_intrenal can reach additional code when the hbsCount is zero.</p>
<p>The other complication upon the original heart beat is a duty cycle limiter. Instead of implementing a compare value, this duty cycle counter is clocked on the execution of this block of code. It contains a state machine with two states: ack and nack. Upon the heart beat reaching this block of code, it is treated as a strobe. In the nack state, a high value on the strobe causes the state machine to transition into the ack state, set the counter to one, and light the LED. In the ack state, the counter up-counts on each execution until it reaches its top value. On the cycle after reaching the top value, the LED is unlit. When the heart beat signal (strobe) is no longer given, the state machine returns to its initial value, nack. </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="gade65acac06eb242d02d71648b41b27f6" name="gade65acac06eb242d02d71648b41b27f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gade65acac06eb242d02d71648b41b27f6">&#9670;&#160;</a></span>FAST_BLINK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FAST_BLINK&#160;&#160;&#160;(9u)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_io_t_01_supervisor__main_8c_source.html#l00104">104</a> of file <a class="el" href="_io_t_01_supervisor__main_8c_source.html">IoT Supervisor_main.c</a>.</p>

</div>
</div>
<a id="gac1580c8fe58aec053a031b2fb84e5016" name="gac1580c8fe58aec053a031b2fb84e5016"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac1580c8fe58aec053a031b2fb84e5016">&#9670;&#160;</a></span>HB_DIV</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HB_DIV&#160;&#160;&#160;(9u)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_io_t_01_supervisor__main_8c_source.html#l00100">100</a> of file <a class="el" href="_io_t_01_supervisor__main_8c_source.html">IoT Supervisor_main.c</a>.</p>

</div>
</div>
<a id="ga28232e33acc0bede8ef1d909136a3f36" name="ga28232e33acc0bede8ef1d909136a3f36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga28232e33acc0bede8ef1d909136a3f36">&#9670;&#160;</a></span>HB_DUTYCYCLE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HB_DUTYCYCLE&#160;&#160;&#160;(4u)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_io_t_01_supervisor__main_8c_source.html#l00101">101</a> of file <a class="el" href="_io_t_01_supervisor__main_8c_source.html">IoT Supervisor_main.c</a>.</p>

</div>
</div>
<a id="ga676c6d2aaaa9903a62ae18e182923d16" name="ga676c6d2aaaa9903a62ae18e182923d16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga676c6d2aaaa9903a62ae18e182923d16">&#9670;&#160;</a></span>HB_SKIP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HB_SKIP&#160;&#160;&#160;(4u)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_io_t_01_supervisor__main_8c_source.html#l00102">102</a> of file <a class="el" href="_io_t_01_supervisor__main_8c_source.html">IoT Supervisor_main.c</a>.</p>

</div>
</div>
<a id="gad2f2358ce2a0e5765d5eb1087633a7e6" name="gad2f2358ce2a0e5765d5eb1087633a7e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad2f2358ce2a0e5765d5eb1087633a7e6">&#9670;&#160;</a></span>SLOW_BLINK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SLOW_BLINK&#160;&#160;&#160;(<a class="el" href="group___blinker.html#gade65acac06eb242d02d71648b41b27f6">FAST_BLINK</a> + 2u)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_io_t_01_supervisor__main_8c_source.html#l00105">105</a> of file <a class="el" href="_io_t_01_supervisor__main_8c_source.html">IoT Supervisor_main.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gac3904e59393211c5ea87813812356e05" name="gac3904e59393211c5ea87813812356e05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac3904e59393211c5ea87813812356e05">&#9670;&#160;</a></span>blinker()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void blinker </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_io_t_01_supervisor__main_8c_source.html#l00113">113</a> of file <a class="el" href="_io_t_01_supervisor__main_8c_source.html">IoT Supervisor_main.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ga9b72b6aa164172cd3d0b8dfe56833c11" name="ga9b72b6aa164172cd3d0b8dfe56833c11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9b72b6aa164172cd3d0b8dfe56833c11">&#9670;&#160;</a></span>configuring</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool configuring = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_io_t_01_supervisor__main_8c_source.html#l00108">108</a> of file <a class="el" href="_io_t_01_supervisor__main_8c_source.html">IoT Supervisor_main.c</a>.</p>

</div>
</div>
<a id="gaae68010a7dda3c61c7edd0eb74195a5d" name="gaae68010a7dda3c61c7edd0eb74195a5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaae68010a7dda3c61c7edd0eb74195a5d">&#9670;&#160;</a></span>hbd_state</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool hbd_state = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_io_t_01_supervisor__main_8c_source.html#l00110">110</a> of file <a class="el" href="_io_t_01_supervisor__main_8c_source.html">IoT Supervisor_main.c</a>.</p>

</div>
</div>
<a id="gaf318e0fdf052bf1c57db435343dbbecc" name="gaf318e0fdf052bf1c57db435343dbbecc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf318e0fdf052bf1c57db435343dbbecc">&#9670;&#160;</a></span>hbdCount</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t hbdCount = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_io_t_01_supervisor__main_8c_source.html#l00109">109</a> of file <a class="el" href="_io_t_01_supervisor__main_8c_source.html">IoT Supervisor_main.c</a>.</p>

</div>
</div>
<a id="gafe53a3c1193d19d6a47b1b45c5001ba1" name="gafe53a3c1193d19d6a47b1b45c5001ba1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafe53a3c1193d19d6a47b1b45c5001ba1">&#9670;&#160;</a></span>hbsCount</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t hbsCount = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_io_t_01_supervisor__main_8c_source.html#l00111">111</a> of file <a class="el" href="_io_t_01_supervisor__main_8c_source.html">IoT Supervisor_main.c</a>.</p>

</div>
</div>
<a id="gab724f7c43d0d1bbb8401d0ef0abf8ac4" name="gab724f7c43d0d1bbb8401d0ef0abf8ac4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab724f7c43d0d1bbb8401d0ef0abf8ac4">&#9670;&#160;</a></span>sys_ok</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sys_ok = true</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_io_t_01_supervisor__main_8c_source.html#l00107">107</a> of file <a class="el" href="_io_t_01_supervisor__main_8c_source.html">IoT Supervisor_main.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.8-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
<script>
  const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches;
  mermaid.initialize({
    startOnLoad: true,
    theme: isDarkMode ? 'dark' : 'default', 
  });
</script>
</body>
</html>
